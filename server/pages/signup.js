(()=>{var e={};e.id=616,e.ids=[616,888,660],e.modules={6833:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>h,default:()=>u,getServerSideProps:()=>x,getStaticPaths:()=>p,getStaticProps:()=>m,reportWebVitals:()=>g,routeModule:()=>S,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>f});var a=s(7093),i=s(5244),n=s(1323),l=s(1070),o=s(3893),d=s(9550),c=e([o]);o=(c.then?(await c)():c)[0];let u=(0,n.l)(d,"default"),m=(0,n.l)(d,"getStaticProps"),p=(0,n.l)(d,"getStaticPaths"),x=(0,n.l)(d,"getServerSideProps"),h=(0,n.l)(d,"config"),g=(0,n.l)(d,"reportWebVitals"),f=(0,n.l)(d,"unstable_getStaticProps"),v=(0,n.l)(d,"unstable_getStaticPaths"),b=(0,n.l)(d,"unstable_getStaticParams"),j=(0,n.l)(d,"unstable_getServerProps"),w=(0,n.l)(d,"unstable_getServerSideProps"),S=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/signup",pathname:"/signup",bundlePath:"",filename:""},components:{App:o.default,Document:l.default},userland:d});r()}catch(e){r(e)}})},4279:(e,t,s)=>{"use strict";s.d(t,{$:()=>p,h:()=>c});var r=s(997),a=s(1649),i=s(5675),n=s.n(i),l=s(1664),o=s.n(l),d=s(6689);let c=()=>{let{data:e,status:t}=(0,a.useSession)();return(0,r.jsxs)("div",{className:"fixed h-[88px] w-full top-0 left-0 bg-gradient-to-bl from-sky-200/90 to-indigo-600/90 z-50 flex justify-around text-sm py-6 border-b border-[#962433]",children:[r.jsx("div",{className:"flex-none w-44 relative image-container",children:r.jsx(o(),{href:"/",className:"absolute inset-0",children:r.jsx(n(),{src:"/rs.svg",alt:"Result School",className:"absolute inset-0 w-full h-full object-contain",fill:!0,sizes:"(min-width: 75em) 33vw, (min-width: 48em) 50vw, 100vw",priority:!0})})}),"unauthenticated"===t?(0,r.jsxs)("div",{className:"flex gap-10 text-lg items-center font-bold",children:[r.jsx(o(),{className:"text-green-900",href:"/api/auth/signin",children:"Войти"}),r.jsx(o(),{className:"text-blue-900",href:"/signup",children:"Регистрация"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"h-10 px-2 font-semibold text-gray-300 align-middle leading-10",children:[e?.user?.name," ←"]}),r.jsx(o(),{className:"h-10 px-6 mr-4 font-semibold rounded-md bg-green-500 text-white align-middle leading-10",href:"/events/create",children:"Создать событие"}),r.jsx(o(),{className:"h-10 px-6 font-semibold rounded-md bg-red-500 text-white align-middle leading-10",href:"/api/auth/signout",children:"Выйти"})]})]})};var u=s(8553);let m=()=>{window.scrollTo({top:0,behavior:"smooth"})},p=()=>{let[e,t]=(0,d.useState)("Minsk"),[s,a]=(0,d.useState)(null),[i,l]=(0,d.useState)("");return(0,d.useEffect)(()=>{fetch((0,u.jJ)(u.cH)).then(e=>e.json()).then(({name:e,main:s,weather:r})=>{t(e),a(Math.round(s.temp)),l(r[0].description)})},[s]),(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"h-2"}),(0,r.jsxs)("div",{className:"h-[88px] w-full mt-auto bottom-0 bg-gradient-to-bl from-sky-200/90 to-indigo-600/90 z-50 flex justify-around text-sm py-6 border-t border-l border-r border-[#962433] rounded-t-md",children:[r.jsx("div",{className:"flex-none text-black font-bold",children:(0,r.jsxs)(o(),{href:"https://vitalyvitmens.github.io/my-portfolio/",target:"_blank",children:[r.jsx("div",{children:"Events"}),(0,r.jsxs)("div",{children:["\xa9"," ",new Date().toLocaleString("en",{year:"numeric"})," ","vitalyvitmens. All rights reserved."]})]})}),r.jsx("a",{onClick:m,className:"cursor-pointer shadow-lg shadow-gray-900 hover:opacity-70 transition duration-300 rounded-full bg-gray-300",children:r.jsx(n(),{src:"/to-up.svg",alt:"To up",width:40,height:40,priority:!0})}),(0,r.jsxs)("div",{className:"flex-none text-black font-bold",children:[(0,r.jsxs)("div",{children:[e," ",new Date().toLocaleString("ru",{day:"numeric",month:"long",year:"numeric"})]}),(0,r.jsxs)("div",{children:[s,"\xb0C, "," ",i]})]})]})]})}},3893:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>c});var a=s(997),i=s(5282);s(108);var n=s(1649),l=s(4279),o=e([i]);function d({Component:e,pageProps:t}){return a.jsx("div",{className:"flex flex-col min-h-screen-minus-footer mx-auto mt-[88px] max-w-4xl rounded-md bg-transparent",children:(0,a.jsxs)(n.SessionProvider,{session:t.session,children:[a.jsx(l.h,{}),a.jsx(e,{...t}),a.jsx(l.$,{})]})})}i=(o.then?(await o)():o)[0],d.getInitialProps=async e=>({pageProps:{session:await (0,n.getSession)({req:e.ctx.req})}});let c=i.SX.withTRPC(d);r()}catch(e){r(e)}})},1070:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(997),a=s(6859);function i(){return(0,r.jsxs)(a.Html,{lang:"en",children:[r.jsx(a.Head,{children:r.jsx("link",{rel:"icon",href:"/favicon.png",type:"image/png",sizes:"32x32"})}),(0,r.jsxs)("body",{children:[r.jsx(a.Main,{}),r.jsx(a.NextScript,{})]})]})}},9550:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(997),a=s(6689),i=s(1163),n=s(1649);let l={ErrorMessage:"Ошибка:",RequestExecutionError:"Ошибка выполнения запроса:",PasswordsDoNotMatch:"Пароли не совпадают",SignInError:"Не удалось выполнить вход",SignUpError:"Произошла ошибка при регистрации",UnknownSignUpError:"Неизвестная ошибка при регистрации"},o={SignUp:"/api/auth/signup"};var d=s(8553);let c=()=>{let e=(0,i.useRouter)(),[t,s]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[m,p]=(0,a.useState)(""),[x,h]=(0,a.useState)(""),[g,f]=(0,a.useState)(""),v=async t=>{t.preventDefault();let r=t.target;if(m!==x){f(l.PasswordsDoNotMatch);return}let a={email:r.email.value,password:m,name:r.name.value};try{if((await fetch(o.SignUp,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok){let t=await (0,n.signIn)("credentials",{redirect:!1,email:a.email,password:a.password});t?.ok?(s(""),u(""),p(""),h(""),e.replace(d.PG.Home)):f(l.SignInError)}else f(l.SignUpError)}catch(e){console.error(l.RequestExecutionError,e),e instanceof Error?f(l.ErrorMessage+e.message):f(l.UnknownSignUpError)}};return(0,r.jsxs)("form",{className:"m-auto w-[300px] p-8 bg-gray-50 dark:bg-gray-900 rounded-xl",onSubmit:v,children:[(0,r.jsxs)("div",{className:"mb-2",children:[r.jsx("label",{htmlFor:"name",children:"Имя:"}),r.jsx("input",{className:"flex w-full text-black text-lg rounded-md",id:"name",name:"name",type:"text",value:c,onChange:e=>u(e.target.value),autoComplete:"name",required:!0})]}),(0,r.jsxs)("div",{className:"mb-2",children:[r.jsx("label",{htmlFor:"email",children:"Электронная почта:"}),r.jsx("input",{className:"flex w-full text-black text-lg rounded-md",id:"email",name:"email",type:"email",value:t,onChange:e=>s(e.target.value),autoComplete:"email",required:!0})]}),(0,r.jsxs)("div",{className:"mb-2",children:[r.jsx("label",{htmlFor:"password",children:"Пароль:"}),r.jsx("input",{className:"flex w-full text-black text-lg rounded-md",id:"password",name:"password",type:"password",value:m,onChange:e=>p(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"mb-2",children:[r.jsx("label",{htmlFor:"confirmPassword",children:"Повторите пароль:"}),r.jsx("input",{className:"flex w-full text-black text-lg rounded-md",id:"confirmPassword",name:"confirmPassword",type:"password",value:x,onChange:e=>h(e.target.value),required:!0})]}),r.jsx("button",{className:"flex text-align-center w-full justify-center rounded-md  mt-6 bg-indigo-600 py-3 text-lg font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",type:"submit",children:"Регистрация"}),g&&r.jsx("p",{className:"text-red-500",children:g})]})}},5282:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{$z:()=>o.$z,SX:()=>c});var a=s(272),i=s(7455),n=s(4936),l=s(3020),o=s(112),d=e([a,i,n,l,o]);[a,i,n,l,o]=d.then?(await d)():d;let c=(0,i.createTRPCNext)({ssr:!0,ssrPrepass:n.ssrPrepass,config(e){let{ctx:t}=e,s=`http://localhost:${process.env.PORT??3e3}/api/trpc`;return{links:[(0,a.httpBatchLink)({url:s,headers:()=>t?.req?.headers?{cookie:t.req.headers.cookie}:{},transformer:l.default})]}},transformer:l.default});r()}catch(e){r(e)}})},112:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{$z:()=>n});var a=s(9926),i=e([a]);let n=(a=(i.then?(await i)():i)[0]).z.object({title:a.z.string().min(1),description:a.z.string().optional(),date:a.z.coerce.date()});a.z.object({id:a.z.number().int().positive(),title:a.z.string().min(1),description:a.z.string().optional(),date:a.z.coerce.date()}),a.z.object({id:a.z.number().int().positive()}),r()}catch(e){r(e)}})},8553:(e,t,s)=>{"use strict";s.d(t,{PG:()=>r,cH:()=>a,jJ:()=>i});let r={Home:"/",Events:"/events",CreateEvent:"/events/create",SignIn:"/auth/signin",SignUp:"/signup"},a=process.env.NEXT_PUBLIC_WEATHER_API_KEY,i=e=>`https://api.openweathermap.org/data/2.5/weather?q=Minsk&units=metric&lang=ru&appid=${e}`},108:()=>{},1649:e=>{"use strict";e.exports=require("next-auth/react")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},272:e=>{"use strict";e.exports=import("@trpc/client")},7455:e=>{"use strict";e.exports=import("@trpc/next")},4936:e=>{"use strict";e.exports=import("@trpc/next/ssrPrepass")},3020:e=>{"use strict";e.exports=import("superjson")},9926:e=>{"use strict";e.exports=import("zod")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[117,61,859,342],()=>s(6833));module.exports=r})();