(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{1721:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/events/[id]/edit",function(){return t(325)}])},4920:(e,s,t)=>{"use strict";t.d(s,{K7:()=>r,Xz:()=>m,lx:()=>o});var i=t(5893),d=t(5675),l=t.n(d),a=t(1664),n=t.n(a);let r=e=>{let{id:s,title:t,description:d,date:a,action:r}=e;return(0,i.jsxs)("div",{className:"flex font-sans shadow-xl mt-2 border border-[#962433] rounded-md bg-gradient-to-bl from-sky-200 to-indigo-600",children:[(0,i.jsx)("div",{className:"flex-none w-48 relative",children:(0,i.jsx)(l(),{src:"/poster.png",alt:"Poster",className:"absolute inset-0 w-full h-full object-cover rounded-l-md",fill:!0,sizes:"(min-width: 75em) 33vw, (min-width: 48em) 50vw, 100vw",priority:!0})}),(0,i.jsxs)("div",{className:"flex-auto p-6",children:[(0,i.jsxs)("div",{className:"flex flex-wrap -mt-6 pt-6 pb-6",children:[(0,i.jsx)("h1",{className:"flex-auto text-lg font-semibold text-slate-900",children:t}),(0,i.jsx)("div",{className:"text-lg font-semibold text-slate-500",children:a.toDateString()}),(0,i.jsx)("div",{className:"w-full flex-none text-sm font-medium text-slate-700 mt-2",children:d})]}),(0,i.jsx)("div",{className:"flex space-x-4 text-sm font-medium",children:(0,i.jsxs)("div",{className:"flex-auto flex space-x-4",children:[r,(0,i.jsx)(n(),{href:"/events/".concat(s),className:"h-10 px-6 font-semibold rounded-md border border-slate-200 text-slate-900 align-middle leading-10",children:"Подробнее"})]})})]})]})},m=e=>{let{title:s,description:t,date:d,participations:l}=e;return(0,i.jsxs)("div",{className:"p-8 font-sans shadow-xl mt-2 border border-[#962433] rounded-md bg-gradient-to-bl from-sky-200 to-indigo-600",children:[(0,i.jsx)("div",{className:"px-4 sm:px-0",children:(0,i.jsx)("h3",{className:"text-base font-semibold leading-7 text-gray-900",children:"Информация о событии"})}),(0,i.jsx)("div",{className:"mt-6 border-t border-gray-100",children:(0,i.jsxs)("dl",{className:"divide-y divide-gray-100",children:[(0,i.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,i.jsx)("dt",{className:"text-sm font-medium leading-6 text-gray-900",children:"Название"}),(0,i.jsx)("dd",{className:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0",children:s})]}),(0,i.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,i.jsx)("dt",{className:"text-sm font-medium leading-6 text-gray-900",children:"Описание"}),(0,i.jsx)("dd",{className:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0",children:t})]}),(0,i.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,i.jsx)("dt",{className:"text-sm font-medium leading-6 text-gray-900",children:"Дата проведения"}),(0,i.jsx)("dd",{className:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0",children:d.toLocaleDateString()})]}),(0,i.jsxs)("div",{className:"px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0",children:[(0,i.jsx)("dt",{className:"text-sm font-medium leading-6 text-gray-900",children:"Участники"}),(0,i.jsx)("dd",{className:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0",children:l.map(e=>{let{user:s}=e;return s.name}).join(", ")})]})]})})]})};t(7294);let o=e=>{let{text:s}=e;return(0,i.jsx)("div",{className:"flex w-max p-8 rounded-xl mx-auto mt-40 text-4xl text-red-600 font-bold bg-[#b7f1b2] border-2 border-[#962433]",children:s})}},837:(e,s,t)=>{"use strict";t.d(s,{O:()=>n});var i=t(5893),d=t(7536),l=t(6312),a=t(6891);let n=e=>{var s;let{onSubmit:t,cancelHandler:n,isEdit:r,data:m}=e,{register:o,handleSubmit:c,formState:{errors:x}}=(0,d.cI)({resolver:(0,l.F)(a.$z),mode:"onChange",defaultValues:{title:(null==m?void 0:m.title)||"",description:(null==m?void 0:m.description)||"",date:(null==m?void 0:m.date)?new Date(m.date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0]}});return(0,i.jsxs)("form",{onSubmit:c(t),children:[(0,i.jsx)("div",{className:"space-y-12 p-8 font-sans shadow-xl mt-2 border border-[#962433] rounded-md bg-gradient-to-bl from-sky-200 to-indigo-600",children:(0,i.jsxs)("div",{className:"border-b border-gray-900/10 pb-12",children:[(0,i.jsx)("h2",{className:"text-base font-semibold leading-7 text-gray-900",children:"Событие"}),(0,i.jsx)("p",{className:"mt-1 text-sm leading-6 text-gray-600",children:"Заполните форму для создания события"}),(0,i.jsxs)("div",{className:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:[(0,i.jsxs)("div",{className:"sm:col-span-4",children:[(0,i.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium leading-6 text-gray-900",children:"Название"}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md",children:(0,i.jsx)("input",{type:"text",id:"title",autoComplete:"title",className:"block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6",...o("title")})})}),(0,i.jsx)("p",{className:"mt-3 text-sm leading-6 text-gray-600",children:null===(s=x.title)||void 0===s?void 0:s.message})]}),(0,i.jsxs)("div",{className:"col-span-full",children:[(0,i.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium leading-6 text-gray-900",children:"Описание"}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("textarea",{id:"description",rows:3,className:"block w-full rounded-md border-0 py-1.5 bg-transparent text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",...o("description")})}),x.description?(0,i.jsx)("p",{className:"mt-3 text-sm leading-6 text-red-500",children:x.description.message}):(0,i.jsx)("p",{className:"mt-3 text-sm leading-6 text-gray-600",children:"Напишите несколько предложений о предстоящем мероприятии"})]}),(0,i.jsxs)("div",{className:"col-span-full",children:[(0,i.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium leading-6 text-gray-900",children:"Дата проведения"}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("input",{id:"date",type:"date",className:"block rounded-md border-0 py-1.5 bg-transparent text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",...o("date")})}),x.date&&(0,i.jsx)("p",{className:"mt-3 text-sm leading-6 text-red-500",children:x.date.message})]})]})]})}),(0,i.jsxs)("div",{className:"mt-2 flex items-center justify-end gap-x-6",children:[(0,i.jsx)("button",{type:"button",className:"text-lg font-semibold leading-6 text-red-600",onClick:n,children:"Отмена"}),(0,i.jsx)("button",{type:"submit",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:r?"Обновить":"Создать"})]})]})}},325:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var i=t(5893),d=t(837),l=t(6891),a=t(1163),n=t(3299),r=t(4920);function m(){let e=(0,a.useRouter)(),s=(0,n.useSession)(),{data:t,isLoading:m}=l.SX.event.findUnique.useQuery({id:Number(e.query.id)}),{mutate:o}=l.SX.event.update.useMutation({onSuccess:()=>{e.push("/events/".concat(e.query.id))}});return m?(0,i.jsx)(r.lx,{text:"Loading..."}):"unauthenticated"===s.status?(0,i.jsx)(r.lx,{text:"Forbidden"}):t?(0,i.jsx)(d.O,{onSubmit:s=>{o({id:Number(e.query.id),...s})},cancelHandler:()=>{e.push("/events/".concat(e.query.id))},data:t,isEdit:!0}):(0,i.jsx)(r.lx,{text:"Event not found"})}}},e=>{var s=s=>e(e.s=s);e.O(0,[345,888,774,179],()=>s(1721)),_N_E=e.O()}]);